<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Catálogo — Blends</title>
  <link rel="stylesheet" href="/assets/css/main.css" />
</head>
<body>
  <header class="site-header">
    <a href="/index.html" class="brand">Blends</a>
    <nav>
      <a href="/public/favoritos.html">Favoritos</a>
      <a href="/public/login.html" id="link-login">Iniciar sesión</a>
      <a href="/public/checkout.html" id="link-checkout">Checkout</a>
    </nav>
  </header>

  <main class="container">
    <h1>Catálogo</h1>
    <div id="product-list" class="grid">
      <!-- Productos se renderizan desde JS -->
    </div>
  </main>

  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/auth.js"></script>
  <script src="/assets/js/cart.js"></script>
  <script>
    // Demo: productos en cliente (puedes sustituir por un JSON público o CMS)
    const MOCK_PRODUCTS = [
      { id: 'gorra-001', title: 'Gorra Clásica', price: 25900, img: '/assets/img/gorra1.jpg', desc: 'Clásica, ajuste trasero.' },
      { id: 'gorra-002', title: 'Gorra Snapback', price: 34900, img: '/assets/img/gorra2.jpg', desc: 'Snapback de calidad.' },
    ];

    const list = document.getElementById('product-list');
    MOCK_PRODUCTS.forEach(p => {
      const card = document.createElement('article');
      card.className = 'card';
      card.innerHTML = `
        <img src="${p.img}" alt="${p.title}" loading="lazy">
        <h3>${p.title}</h3>
        <p class="price">$${(p.price/100).toFixed(2)}</p>
        <p>${p.desc}</p>
        <div class="card-actions">
          <a class="btn" href="/public/producto.html?id=${p.id}">Ver</a>
          <button class="btn outline add-cart" data-id="${p.id}" data-title="${p.title}" data-price="${p.price}">Añadir</button>
        </div>
      `;
      list.appendChild(card);
    });

    // Delegación para añadir al carrito
    list.addEventListener('click', e => {
      if (e.target.matches('.add-cart')) {
        const el = e.target;
        const item = {
          id: el.dataset.id,
          title: el.dataset.title,
          price: Number(el.dataset.price),
          qty: 1
        };
        window.Cart && window.Cart.addItem(item);
      }
    });
  </script>
</body>
</html>
